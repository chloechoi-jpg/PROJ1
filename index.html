<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Your Own Adventure</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap">
</head>
<body class="landing-page">
    <div class="landing-container">
        <img src="images/FINALTITLECARD.png" alt="Choose Your Own Adventure" class="landing-title" />
        <div style="text-align:center; margin-top: 40px; margin-bottom: 20px;">
            <button class="start-btn" onclick="location.href='pages/page1.html'">START</button>
        </div>
        <!-- Rotating circle of anchor points (replaces video) -->
        <div class="circle-nav-wrapper">
            <svg class="circle-nav-lines" width="500" height="500"></svg>
            <div class="circle-nav">
                <!-- Anchor points will be injected by JS -->
            </div>
        </div>
    </div>

        <script>
        // Map of page links (story paths)
        const pageLinks = [
            [2,3,4], // page1
            [5,6],   // page2
            [7,8],   // page3
            [9,10],  // page4
            [11],    // page5
            [13],    // page6
            [14],    // page7
            [15],    // page8
            [17],    // page9
            [19],    // page10
            [20],    // page11
            [22],    // page12
            [20],    // page13
            [20],    // page14
            [21],    // page15
            [25],    // page16
            [20],    // page17
            [22],    // page18
            [23],    // page19
            [24,28], // page20
            [22],    // page21
            [27,20], // page22
            [24,26], // page23
            [30],    // page24
            [24,26], // page25
            [],      // page26
            [],      // page27
            [27,24], // page28
            [22],    // page29
            []       // page30
        ];

        const pages = Array.from({length: 30}, (_, i) => `pages/page${i+1}.html`);
        const circleNav = document.querySelector('.circle-nav');
        const svg = document.querySelector('.circle-nav-lines');
        const radius = 200;
        const centerX = 250;
        const centerY = 250;
        let points = [];
        pages.forEach((page, idx) => {
                const angle = (2 * Math.PI * idx) / pages.length;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                points.push({x, y});
                const a = document.createElement('a');
                a.href = page;
                a.className = 'circle-anchor';
                a.style.left = `${x - 20}px`;
                a.style.top = `${y - 20}px`;
                a.textContent = idx + 1;
                circleNav.appendChild(a);
        });

        // Draw lines connecting only story paths
        function drawLines(rot = 0) {
            svg.innerHTML = '';
            for (let i = 0; i < pageLinks.length; i++) {
                const fromIdx = i;
                pageLinks[i].forEach(toIdx => {
                    // Convert to zero-based index
                    const to = toIdx - 1;
                    // Calculate rotated positions
                    const angleFrom = (2 * Math.PI * fromIdx) / pages.length + rot;
                    const angleTo = (2 * Math.PI * to) / pages.length + rot;
                    const x1 = centerX + radius * Math.cos(angleFrom);
                    const y1 = centerY + radius * Math.sin(angleFrom);
                    const x2 = centerX + radius * Math.cos(angleTo);
                    const y2 = centerY + radius * Math.sin(angleTo);
                    svg.innerHTML += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#888" stroke-width="1" />`;
                });
            }
        }

        // Animate rotation
        let rot = 0;
        function animate() {
            rot += 0.001; // even slower rotation
            // Move anchors
            document.querySelectorAll('.circle-anchor').forEach((a, idx) => {
                const angle = (2 * Math.PI * idx) / pages.length + rot;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                a.style.left = `${x - 20}px`;
                a.style.top = `${y - 20}px`;
            });
            drawLines(rot);
            requestAnimationFrame(animate);
        }
        drawLines();
        animate();
        </script>
</body>
</html>
